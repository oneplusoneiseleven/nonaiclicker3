<!DOCTYPE html>
<html>
  <style>
    body {
      background-color: black;
      color: white;
    }
    .colored {
      background-color: midnightblue;
      color: white;
    }
  </style>
  <head>
    <title>
      Rebalanced clicker game
    </title>
  </head>
  <body>
    <p>
      Clicks: <span id="clicks">0</span>
    </p>
    <button onclick="addClicks(1)" class="colored">
      Click
    </button>
    <button onclick="buyClicker(0)" class="colored">
      Autoclicker [<span id="autoclickerprice">20</span>] -- <span id="autoclickers">0</span>
    </button>
    <button onclick="buyClicker(1)" class="colored">
      Megaclicker [<span id="megaclickerprice">250</span>] -- <span id="megaclickers">0</span>
    </button>
    <p>
      Rebirths: <span id="rebirths">0</span>
    </p>
    <button onclick="rebirth()" class="colored">
      Rebirths available [<span id="rebirthsavailable">0</span>]
    </button>
    <script>
      var clicks = 0
      var autoclickers = 0
      var autoclickerprice = 20
      var megaclickers = 0
      var megaclickerprice = 250
      var rebirths = 0
      var rebirthsavailable = 0

      function addClicks(amount) {
        clicks = clicks + amount
        refreshValues()
      }

      function buyClicker(clickerid) {
        if (clickerid === 0 && clicks >= autoclickerprice) {
          clicks = clicks - autoclickerprice
          autoclickerprice = Math.round(autoclickerprice*1.2)
          autoclickers = autoclickers + 1
          refreshValues()
        }
        if (clickerid === 1 && clicks >= megaclickerprice) {
          clicks = clicks - megaclickerprice
          megaclickerprice = Math.round(megaclickerprice*1.18)
          megaclickers = megaclickers + 1
          refreshValues()
        }
      }

      function rebirth() {
        if (rebirthsavailable > 0) {
          rebirths = rebirths + rebirthsavailable
          rebirthsavailable = 0
          clicks = 0
          autoclickers = 0
          autoclickerprice = 20
          megaclickers = 0
          megaclickerprice = 250
          refreshValues()
        }
      }

      function refreshValues() {
        document.getElementById("clicks").innerHTML = clicks
        document.getElementById("autoclickers").innerHTML = autoclickers
        document.getElementById("autoclickerprice").innerHTML = autoclickerprice
        document.getElementById("megaclickers").innerHTML = megaclickers
        document.getElementById("megaclickerprice").innerHTML = megaclickerprice
        document.getElementById("rebirths").innerHTML = rebirths
        document.getElementById("rebirthsavailable").innerHTML = rebirthsavailable
      }

      setInterval(function() {
        clicks = clicks + (rebirths + 1)*(autoclickers + 5*megaclickers)
        rebirthsavailable = 3*Math.sqrt(clicks/10000)
        refreshValues()
      }, 1000)
    </script>
  </body>
</html>
